<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Flipbook PMB SMAZA 16 2026/2027</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    background: #000;
    height: 100%;
    width: 100%;
  }

  #flipbook {
    position: relative;
    width: 100%;
    height: 100vh;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    perspective: 2000px;
    touch-action: none;
    user-select: none;
  }

  #flipbook img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    position: absolute;
    top: 0;
    left: 0;
    opacity: 0;
    transform: rotateY(0deg);
    backface-visibility: hidden;
    transition: transform 0.9s ease, opacity 0.6s ease;
  }

  #flipbook img.active {
    opacity: 1;
    z-index: 2;
  }

  /* ✨ Efek buka halaman kanan (ke depan) */
  #flipbook img.flip-right {
    transform-origin: left center;
    transform: rotateY(-100deg);
    opacity: 0;
  }

  /* ✨ Efek buka halaman kiri (kembali ke belakang) */
  #flipbook img.flip-left {
    transform-origin: right center;
    transform: rotateY(100deg);
    opacity: 0;
  }

  /* Bayangan lembut di tengah saat aktif */
  #flipbook::before {
    content: '';
    position: absolute;
    width: 100%;
    height: 100%;
    background: radial-gradient(ellipse at center, rgba(0,0,0,0.25) 0%, transparent 70%);
    pointer-events: none;
    z-index: 3;
  }
</style>
</head>
<body>
<div id="flipbook"></div>

<script>
const IMG_FOLDER = './img/';
const BASE_NAME = 'FLIPBOOK PMB 20262027_20251015_153943_0000 ';
const TOTAL_PAGES = 12; // ubah sesuai jumlah halaman

const container = document.getElementById('flipbook');

// buat elemen gambar otomatis
for (let i = 1; i <= TOTAL_PAGES; i++) {
  const img = document.createElement('img');
  img.src = IMG_FOLDER + BASE_NAME + i + '.jpeg';
  if (i === 1) img.classList.add('active');
  container.appendChild(img);
}

const imgs = container.querySelectorAll('img');
let current = 0;
let flipping = false;

function show(index, direction = 'right') {
  if (flipping || index === current) return;
  flipping = true;

  const oldImg = imgs[current];
  const newImg = imgs[index];

  oldImg.classList.remove('active');
  oldImg.classList.add(direction === 'right' ? 'flip-right' : 'flip-left');

  // Tambahkan efek waktu transisi
  setTimeout(() => {
    oldImg.classList.remove('flip-right', 'flip-left');
    oldImg.style.opacity = 0;
    newImg.classList.add('active');
    flipping = false;
  }, 900);

  current = index;
}

function next() {
  const nextIndex = (current + 1) % imgs.length;
  show(nextIndex, 'right');
}

function prev() {
  const prevIndex = (current - 1 + imgs.length) % imgs.length;
  show(prevIndex, 'left');
}

/* SWIPE TOUCH */
let startX = 0;
let isSwiping = false;
container.addEventListener('touchstart', e => {
  startX = e.touches[0].clientX;
  isSwiping = true;
});
container.addEventListener('touchend', e => {
  if (!isSwiping) return;
  const diff = e.changedTouches[0].clientX - startX;
  if (Math.abs(diff) > 50) diff < 0 ? next() : prev();
  isSwiping = false;
});

/* MOUSE DRAG */
let mouseDown = false;
let mouseStartX = 0;
container.addEventListener('mousedown', e => {
  mouseDown = true;
  mouseStartX = e.clientX;
});
container.addEventListener('mouseup', e => {
  if (!mouseDown) return;
  const diff = e.clientX - mouseStartX;
  if (Math.abs(diff) > 50) diff < 0 ? next() : prev();
  mouseDown = false;
});
container.addEventListener('mouseleave', () => mouseDown = false);

/* KEYBOARD */
document.addEventListener('keydown', e => {
  if (e.key === 'ArrowRight') next();
  if (e.key === 'ArrowLeft') prev();
});
</script>
</body>
</html>
