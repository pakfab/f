<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Flipbook PMB SMAZA 16 2026/2027</title>
<style>
  html, body {
    margin: 0;
    height: 100%;
    background: #111;
    overflow: hidden;
  }

  #book {
    position: relative;
    width: 90vw;
    height: 90vh;
    margin: auto;
    top: 5vh;
    perspective: 2000px;
  }

  .page {
    position: absolute;
    width: 50%;
    height: 100%;
    background: #222;
    overflow: hidden;
    transform-style: preserve-3d;
    transition: transform 1s ease, box-shadow 1s ease;
    backface-visibility: hidden;
    box-shadow: 0 0 20px rgba(0,0,0,0.4);
  }

  .page img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    backface-visibility: hidden;
  }

  /* sisi kanan */
  .page.right {
    left: 50%;
    transform-origin: left center;
    z-index: calc(100 - var(--i));
  }

  /* sisi kiri */
  .page.left {
    left: 0;
    transform-origin: right center;
    z-index: calc(100 - var(--i));
  }

  /* efek bayangan di tepi dalam halaman */
  .shadow {
    position: absolute;
    top: 0;
    width: 30%;
    height: 100%;
    pointer-events: none;
    background: linear-gradient(to right, rgba(0,0,0,0.5), transparent);
    opacity: 0;
    transition: opacity 0.8s ease;
  }
  .page.left .shadow {
    right: 0;
    background: linear-gradient(to left, rgba(0,0,0,0.5), transparent);
  }

  /* animasi buka */
  .page.open.left {
    transform: rotateY(-180deg);
    box-shadow: -5px 0 20px rgba(0,0,0,0.5);
  }

  .page.open.right {
    transform: rotateY(180deg);
    box-shadow: 5px 0 20px rgba(0,0,0,0.5);
  }

  /* saat buka, munculkan efek bayangan tengah */
  .page.open .shadow {
    opacity: 1;
  }

  /* efek gradasi tengah buku */
  #center-shadow {
    position: absolute;
    left: 50%;
    top: 0;
    width: 4%;
    height: 100%;
    background: radial-gradient(ellipse at center, rgba(0,0,0,0.4) 0%, transparent 80%);
    transform: translateX(-50%);
    z-index: 200;
    pointer-events: none;
  }
</style>
</head>
<body>

<div id="book">
  <div id="center-shadow"></div>
</div>

<script>
const IMG_FOLDER = "./img/";
const BASE_NAME = "FLIPBOOK PMB 20262027_20251015_153943_0000 ";
const TOTAL_PAGES = 12;

const book = document.getElementById("book");

// Buat halaman kiri dan kanan otomatis
for (let i = 1; i <= TOTAL_PAGES; i++) {
  const page = document.createElement("div");
  page.classList.add("page");
  page.classList.add(i % 2 === 0 ? "right" : "left");
  page.style.setProperty('--i', i);

  const img = document.createElement("img");
  img.src = IMG_FOLDER + BASE_NAME + i + ".jpeg";
  page.appendChild(img);

  // tambahkan shadow efek di dalam halaman
  const shadow = document.createElement("div");
  shadow.classList.add("shadow");
  page.appendChild(shadow);

  book.appendChild(page);
}

let currentPage = 1;
const pages = document.querySelectorAll(".page");

// fungsi buka/tutup
function nextPage() {
  if (currentPage < TOTAL_PAGES) {
    pages[currentPage - 1].classList.add("open");
    currentPage++;
  }
}

function prevPage() {
  if (currentPage > 1) {
    currentPage--;
    pages[currentPage - 1].classList.remove("open");
  }
}

// navigasi keyboard
document.addEventListener("keydown", (e) => {
  if (e.key === "ArrowRight") nextPage();
  if (e.key === "ArrowLeft") prevPage();
});

// gesture mouse
let startX = 0;
book.addEventListener("mousedown", e => startX = e.clientX);
book.addEventListener("mouseup", e => {
  const diff = e.clientX - startX;
  if (Math.abs(diff) > 50) diff < 0 ? nextPage() : prevPage();
});

// gesture sentuh (mobile)
book.addEventListener("touchstart", e => startX = e.touches[0].clientX);
book.addEventListener("touchend", e => {
  const diff = e.changedTouches[0].clientX - startX;
  if (Math.abs(diff) > 50) diff < 0 ? nextPage() : prevPage();
});
</script>

</body>
</html>
